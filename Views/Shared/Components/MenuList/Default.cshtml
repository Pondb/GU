@{
    @using Microsoft.AspNetCore.Http
}



@*<nav class="navbar navbar-expand-sm bg-dark navbar-fixed-top">*@
<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <div class="container">





        <!-- Brand -->
        <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index" >GROWYP</a>

        <!-- Links -->
        <ul class="navbar-nav">

            
            <li class="nav-item">
                <a asp-area="" asp-controller="Todo_Task" asp-action="Add_Task" class="nav-link">Tasks</a>
            </li>
            <li class="nav-item">
                <a asp-area="" asp-controller="Main" asp-action="Index" class="nav-link">Your Trees</a>
            </li>
            <li class="nav-item">
                <a asp-area="" asp-controller="Home" asp-action="About" class="nav-link">About</a>
            </li>
            <li class="nav-item">
                <a asp-area="" asp-controller="Home" asp-action="Contact" class="nav-link">Contact</a>
            </li>

            <li class="nav-item">
                <a class="nav-link"> | </a>
            </li>



            @{
                var user_id = Context.Session.GetString("User_ID");
            }

            @{
                if (user_id != null)
                {
                    <!-- User Dropdown -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                            @{


                                if (ViewBag.User != null)
                                {

                                    List<GU.Models.User> UserInfo = ViewBag.User;

                                    foreach (var m in UserInfo)
                                    {
                                        @m.Email

                                    }
                                }
                            }
                        </a>
                        <div class="dropdown-menu">
                            <a asp-area="" asp-controller="Users" asp-action="Edit" asp-route-id="@user_id" class="dropdown-item">
                                @{


                                    if (ViewBag.User != null)
                                    {

                                        List<GU.Models.User> UserInfo = ViewBag.User;

                                        foreach (var m in UserInfo)
                                        {
                                            @m.First_Name

                                        }
                                    }


                                } @{


                                    if (ViewBag.User != null)
                                    {

                                        List<GU.Models.User> UserInfo = ViewBag.User;

                                        foreach (var m in UserInfo)
                                        {
                                            @m.Last_Name

                                        }
                                    }




                                }
                            </a>
                            <a asp-area="" asp-controller="Users" asp-action="ChangePassword" class="dropdown-item">Change Password</a>
                            <a asp-area="" asp-controller="Home" asp-action="Logout" class="dropdown-item">Log out</a>

                        </div>
                    </li>
                }
                else
                {
                    <li class="nav-item">
                        <a asp-area="" asp-controller="Users" asp-action="Create" class="nav-link">Sign up</a>
                    </li>

                    <li class="nav-item" onclick="openLoginModal()">
                        <a class="nav-link" href="#">Login</a>
                    </li>




                }

            }




        </ul>










        <!-- NEW ADD -->

        @*<div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a asp-area="" asp-controller="Home" asp-action="Index" class="navbar-brand">Grow Up</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a asp-area="" asp-controller="Home" asp-action="Index">Home</a></li>
                <li><a asp-area="" asp-controller="Home" asp-action="About">About</a></li>
                <li><a asp-area="" asp-controller="Home" asp-action="Contact">Contact</a></li>
                <li><a asp-area="" asp-controller="Main" asp-action="Index">GROW UP Beta</a></li>
                <li><a asp-area="" asp-controller="Todo_Task" asp-action="Add_Task">Add Task</a></li>

            </ul>


            @{
                var user_id = Context.Session.GetString("User_ID");
            }

            @{
                if (user_id != null)
                {
                    <ul class="nav navbar-top-links navbar-right">
                       
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                <font style="color:white">



                                    @{


                                        if (ViewBag.User != null)
                                        {

                                            List<GU.Models.User> UserInfo = ViewBag.User;

                                            foreach (var m in UserInfo)
                                            {
                                                @m.First_Name

                                            }
                                        }




                                    } @{


                                        if (ViewBag.User != null)
                                        {

                                            List<GU.Models.User> UserInfo = ViewBag.User;

                                            foreach (var m in UserInfo)
                                            {
                                                @m.Last_Name

                                            }
                                        }




                                    }
                                </font>
                                <i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-messages">
                                <li>
                                    <a asp-area="" asp-controller="Users" asp-action="Edit" asp-route-id="@user_id">
                                        <i class="fa fa-user fa-fw"></i>


                                        (@{


                                            if (ViewBag.User != null)
                                            {

                                                List<GU.Models.User> UserInfo = ViewBag.User;

                                                foreach (var m in UserInfo)
                                                {
                                                    @m.First_Name

                                                }
                                            }


                                        }) @{


                                            if (ViewBag.User != null)
                                            {

                                                List<GU.Models.User> UserInfo = ViewBag.User;

                                                foreach (var m in UserInfo)
                                                {
                                                    @m.Email

                                                }
                                            }




                                        }

                                    </a>

                                </li>
                                <li>
                                    <a asp-area="" asp-controller="Users" asp-action="ChangePassword"><i class="fa fa-gear fa-fw"></i> Change Password</a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a asp-area="" asp-controller="Home" asp-action="Logout"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                                </li>
                            </ul>
                           
                        </li>
                    </ul>
                }
                else
                {
                    <ul class="nav navbar-nav navbar-right">

                        <li><a asp-area="" asp-controller="Users" asp-action="Create"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
                        <li onclick="openLoginModal()"><a href="#"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>



                    </ul>
                }
            }


        </div>*@

        <!--ทำถึงตอนปั่น User ออกมาที่มุมขวาบน -->
        <!-- และซ่อนแถบ Login ตอนล็อคอินแล้ว -->

    </div>
</nav>


